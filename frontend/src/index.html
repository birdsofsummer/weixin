<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>weixin jssdk demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2.9/lib/index.css" />
</head>
<body>

 <section id="app">
    <van-row>
      <div v-for="(v,i) in jsApiList"  >
          <van-col span="4">
          <van-button @click="say(v)" :type="buttons[i%5]" >{{v}} </van-button>
          </van-col>
      </div>
    </van-row>
 </section>

</body>
</html>



<script src="https://cdn.bootcdn.net/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vant@2.9/lib/vant.min.js"></script>
<script src="//res.wx.qq.com/open/js/jweixin-1.6.0.js" defer></script>


<script charset="utf-8">

/*   
参考

https://www.weixinsxy.com/jssdk/
https://www.weixinsxy.com/jssdk/js/demo.js
https://vant-contrib.gitee.io/vant/#/zh-CN/cell


o= {
  "appId": "wx0f713af1c8799df9",
  "nonceStr": "lnihbfokhheenblk",
  "jsapi_ticket": "sM4AOVdWfPE4DxkXGEs8VMdpedBBeAe0I5SLCr-9y-6pJ6IF1cmOTqjMl5qREtXstnTX1za-7BZqKHTKiCxi4w",
  "signature": "c8da7cac6f40ac0a6f72a804886c51d65451f660",
  "url": "https://www.baidu.com",
  "rawString": "jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VMdpedBBeAe0I5SLCr-9y-6pJ6IF1cmOTqjMl5qREtXstnTX1za-7BZqKHTKiCxi4w&noncestr=lnihbfokhheenblk&timestamp=1594694353&url=https://www.baidu.com",
  "timestamp": 1594694353,
  "expires_in": 1594701553,
  "token": "35_uu8a-DngMD28gRTAv-xcwgl6wxSyfm2cT6miOxgP-z9H18vSA8Snbi4c8gZOjlmbaH70Qg45_koZMuD-2Uq-yTHTPhow6n2kjlmKCRd_EpH3bK1ft3Af3Wti7_uSa_gqOHU71q03_7dWTbkhGQVjABAZJO"
}
*/

const jsApiList=[
        'checkJsApi',
        'onMenuShareTimeline',
        'onMenuShareAppMessage',
        'onMenuShareQQ',
        'onMenuShareWeibo',
        'onMenuShareQZone',
        'hideMenuItems',
        'showMenuItems',
        'hideAllNonBaseMenuItem',
        'showAllNonBaseMenuItem',
        'translateVoice',
        'startRecord',
        'stopRecord',
        'onVoiceRecordEnd',
        'playVoice',
        'onVoicePlayEnd',
        'pauseVoice',
        'stopVoice',
        'uploadVoice',
        'downloadVoice',
        'chooseImage',
        'previewImage',
        'uploadImage',
        'downloadImage',
        'getNetworkType',
        'openLocation',
        'getLocation',
        'hideOptionMenu',
        'showOptionMenu',
        'closeWindow',
        'scanQRCode',
        'chooseWXPay',
        'openProductSpecificView',
        'addCard',
        'chooseCard',
        'openCard',
]

vcomponents=[
	"ActionSheet",
	"AddressEdit",
	"AddressList",
	"Area",
	"Button",
	"Calendar",
	"Card",
	"Cell",
	"CellGroup",
	"Checkbox",
	"CheckboxGroup",
	"Circle",
	"Col",
	"Collapse",
	"CollapseItem",
	"ContactCard",
	"ContactEdit",
	"ContactList",
	"CountDown",
	"Coupon",
	"CouponCell",
	"CouponList",
	"DatetimePicker",
	"Dialog",
	"Divider",
	"DropdownItem",
	"DropdownMenu",
	"Empty",
	"Field",
	"Form",
	"GoodsAction",
	"GoodsActionButton",
	"GoodsActionIcon",
	"Grid",
	"GridItem",
	"Icon",
	"Image",
	"ImagePreview",
	"IndexAnchor",
	"IndexBar",
	"Info",
	"Lazyload",
	"List",
	"Loading",
	"Locale",
	"NavBar",
	"NoticeBar",
	"Notify",
	"NumberKeyboard",
	"Overlay",
	"Pagination",
	"Panel",
	"PasswordInput",
	"Picker",
	"Popup",
	"Progress",
	"PullRefresh",
	"Radio",
	"RadioGroup",
	"Rate",
	"Row",
	"Search",
	"ShareSheet",
	"Sidebar",
	"SidebarItem",
	"Skeleton",
	"Sku",
	"Slider",
	"Step",
	"Stepper",
	"Steps",
	"Sticky",
	"SubmitBar",
	"Swipe",
	"SwipeCell",
	"SwipeItem",
	"Switch",
	"SwitchCell",
	"Tab",
	"Tabbar",
	"TabbarItem",
	"Tabs",
	"Tag",
	"Toast",
	"TreeSelect",
	"Uploader"
]


get=(u)=>fetch(u).then(x=>x.json())

init=async()=>{
    u="https://service-qsqxa5fo-1252957949.gz.apigw.tencentcs.com/release/weixin-token/jssdk"

    o=await get(u)
    localStorage.config=JSON.stringify(o) 
    o1={
      ...o,
      debug: true,
      jsApiList,
    }
    wx.config(o1)
}
init1=()=>{
    init().then(x=>{
    wx.ready(function(e){
        console.log('rrrrrrr',e)
    });
    wx.error(function(res){
        console.log('111111',res)
    });
    })
}

init1()


Vue.use(vant.Lazyload);
vcomponents.forEach(x=>Vue.use(vant[x]))



 app= new Vue({
    el: '#app',
  //  template: `<van-button>按钮</van-button>`,
    created(){

    },
    methods:{
     say(x){
          console.log(x)
         //alert(x)
         vant.Toast(x);
     },
    },
    mounted(){
         //vant.Toast('提示');
    },
    data(){
      return {
            jsApiList,
            buttons:[
                "default",
                "primary",
                "info",
                "warning",
                "danger",
            ],


      }

    }
  });


</script>
